import{r as n,j as e}from"./react-BBjJjj3s.js";import{C as f,u as m,M as p}from"./three-s7DBp6_P.js";import"./vendor-BSC4DWPL.js";function v({metric:a,index:l,maxValue:r}){const o=n.useRef(null),s=n.useRef(!1),t=a.value/r*3.2+.4,i=(l-2)*1.8;return m(c=>{if(!o.current)return;const u=c.clock.getElapsedTime(),d=s.current?1.12:1;o.current.scale.y=p.lerp(o.current.scale.y,d,.1),o.current.rotation.y=Math.sin(u*.6+l)*.1}),e.jsxs("group",{position:[i,0,0],children:[e.jsxs("mesh",{ref:o,position:[0,t/2,0],onPointerOver:()=>{s.current=!0},onPointerOut:()=>{s.current=!1},children:[e.jsx("boxGeometry",{args:[.9,t,.9]}),e.jsx("meshStandardMaterial",{color:a.color,emissive:a.color,emissiveIntensity:.2})]}),e.jsxs("mesh",{position:[0,t+.35,0],children:[e.jsx("sphereGeometry",{args:[.22,24,24]}),e.jsx("meshStandardMaterial",{color:"#ffffff",emissive:a.color,emissiveIntensity:.6})]})]})}function h({kpis:a}){const l=n.useMemo(()=>[{label:"Total Order Value",value:a.totalOrderValue,display:`$${a.totalOrderValue.toLocaleString()}`,color:"#7effc7"},{label:"Below Safety Stock",value:a.itemsBelowSafetyStock,display:a.itemsBelowSafetyStock.toLocaleString(),color:"#ffd166"},{label:"Avg Coverage",value:a.avgStockCoverageDays,display:`${a.avgStockCoverageDays} days`,color:"#7aa2ff"},{label:"Suppliers",value:a.ordersBySupplierCount,display:a.ordersBySupplierCount.toLocaleString(),color:"#ff9f6e"},{label:"Critical Items",value:a.criticalItemsCount,display:a.criticalItemsCount.toLocaleString(),color:"#ff7b7b"}],[a]),r=Math.max(...l.map(o=>o.value),1);return e.jsxs("div",{className:"kpi-orbit",children:[e.jsxs(f,{camera:{position:[0,2.2,8.5],fov:38},dpr:[1,2],children:[e.jsx("ambientLight",{intensity:.8}),e.jsx("directionalLight",{position:[6,6,6],intensity:1.1}),e.jsx("group",{rotation:[-.12,.42,0],children:l.map((o,s)=>e.jsx(v,{metric:o,index:s,maxValue:r},o.label))})]}),e.jsx("div",{className:"kpi-legend kpi-legend--overlay",children:l.map(o=>e.jsxs("div",{className:"kpi-legend-item",children:[e.jsx("span",{className:"kpi-legend-dot",style:{backgroundColor:o.color,color:o.color}}),e.jsx("span",{className:"kpi-legend-label",children:o.label}),e.jsx("span",{className:"kpi-legend-value",children:o.display})]},o.label))})]})}export{h as KPIOrbit};
